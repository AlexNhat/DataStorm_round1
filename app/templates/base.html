<!DOCTYPE html>
<html lang="vi" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}Supply Chain Analytics Dashboard{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" referrerpolicy="no-referrer" />
    <style>
        body {font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;}
        .ui-card {
            border-radius: 1.5rem;
            border: 1px solid rgba(226, 232, 240, 0.7);
            background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(248,250,252,0.7));
            padding: 1.5rem;
            box-shadow: 0 25px 45px rgba(15,23,42,0.08);
            transition: transform .2s ease, box-shadow .2s ease;
        }
        .ui-card:hover {transform: translateY(-3px); box-shadow: 0 30px 55px rgba(15,23,42,0.12);}
        .fade-in {animation: fadeIn .35s ease;}
        @keyframes fadeIn {from {opacity:0; transform:translateY(8px);} to {opacity:1; transform:translateY(0);}}
    </style>
    {% block extra_head %}{% endblock %}
</head>
<body class="bg-slate-100 text-slate-900 dark:bg-slate-900 dark:text-slate-100 transition-colors duration-300">
    <div class="min-h-screen flex">
        <aside class="hidden lg:flex flex-col w-64 bg-white/90 dark:bg-slate-950/80 border-r border-slate-200 dark:border-slate-800 backdrop-blur-xl fixed inset-y-0 z-20">
            <div class="px-6 py-6 flex items-center justify-between">
                <div>
                    <p class="text-xs uppercase tracking-[0.4em] text-slate-400">DataStorm</p>
                    <h1 class="text-xl font-semibold text-slate-900 dark:text-white">Supply Chain AI</h1>
                </div>
                <button id="themeToggle" class="text-slate-500 dark:text-slate-300 hover:text-blue-500 transition">
                    <i class="fa-solid fa-circle-half-stroke"></i>
                </button>
            </div>
            <nav class="px-6 space-y-2 text-sm font-medium text-slate-600 dark:text-slate-300 flex-1">
                <a href="/dashboard" class="flex items-center gap-3 px-3 py-2 rounded-2xl hover:bg-blue-50 dark:hover:bg-slate-800 transition">
                    <i class="fa-solid fa-gauge"></i> Dashboard
                </a>
                <a href="/dashboard/ai" class="flex items-center gap-3 px-3 py-2 rounded-2xl hover:bg-blue-50 dark:hover:bg-slate-800 transition">
                    <i class="fa-solid fa-robot"></i> AI Models
                </a>
                <a href="/dashboard/models" class="flex items-center gap-3 px-3 py-2 rounded-2xl hover:bg-blue-50 dark:hover:bg-slate-800 transition">
                    <i class="fa-solid fa-table-list"></i> Model Catalog
                </a>
                <a href="/dashboard/metrics" class="flex items-center gap-3 px-3 py-2 rounded-2xl hover:bg-blue-50 dark:hover:bg-slate-800 transition">
                    <i class="fa-solid fa-chart-line"></i> Model Metrics
                </a>
                <a href="/v8/dashboard" class="flex items-center gap-3 px-3 py-2 rounded-2xl hover:bg-blue-50 dark:hover:bg-slate-800 transition">
                    <i class="fa-solid fa-brain"></i> Strategic AI
                </a>
                <a href="/os/control-center" class="flex items-center gap-3 px-3 py-2 rounded-2xl hover:bg-blue-50 dark:hover:bg-slate-800 transition">
                    <i class="fa-solid fa-sliders"></i> Control Center
                </a>
            </nav>
            <div class="px-6 py-4 text-xs text-slate-400">Â© 2025 DataStorm Ops</div>
        </aside>

        <div class="flex-1 lg:ml-64 flex flex-col min-h-screen">
            <header class="sticky top-0 z-10 bg-white/80 dark:bg-slate-950/70 backdrop-blur-xl border-b border-slate-200 dark:border-slate-800">
                <div class="flex items-center justify-between px-4 md:px-8 py-4">
                    <div class="lg:hidden flex items-center gap-3 text-sm text-slate-500">
                        <button id="mobileNavToggle" class="text-xl"><i class="fa-solid fa-bars"></i></button>
                        <span class="font-semibold">Supply Chain AI</span>
                    </div>
                    <div class="hidden lg:flex items-center gap-8 text-xs text-slate-500 uppercase tracking-[0.3em]">
                        <span>Realtime insights</span>
                        <span>GLOBAL dataset</span>
                        <span>Auto-monitoring</span>
                    </div>
                    <div class="flex items-center gap-3">
                        <a href="/health" class="text-sm px-4 py-2 rounded-2xl bg-blue-600 text-white hover:bg-blue-500 transition shadow-lg">System Health</a>
                    </div>
                </div>
            </header>

            <main class="flex-1 px-4 md:px-8 py-8 space-y-6 fade-in">
                {% block content %}{% endblock %}
            </main>
        </div>
    </div>

    {% block extra_scripts %}{% endblock %}
    <script>
        const root = document.documentElement;
        const storedTheme = localStorage.getItem('theme');
        if (storedTheme === 'dark' || (!storedTheme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            root.classList.add('dark');
        }
        const toggleTheme = () => {
            root.classList.toggle('dark');
            localStorage.setItem('theme', root.classList.contains('dark') ? 'dark' : 'light');
        };
        document.getElementById('themeToggle')?.addEventListener('click', toggleTheme);
        document.getElementById('mobileNavToggle')?.addEventListener('click', () => {
            const aside = document.querySelector('aside');
            aside?.classList.toggle('hidden');
        });
    </script>
</body>
</html>
