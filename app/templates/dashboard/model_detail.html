{% extends "base.html" %}
{% import "components/card.html" as card %}
{% import "components/badge_status.html" as badge %}

{% block title %}{{ model.name }} · Model detail{% endblock %}

{% block content %}
<section class="ui-card mb-6 space-y-4">
    <a href="/dashboard/models" class="text-sm text-blue-600 hover:underline flex items-center gap-2">
        <i class="fa-solid fa-arrow-left"></i> Back to catalog
    </a>
    <div class="flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between">
        <div>
            <p class="text-xs uppercase tracking-[0.35em] text-slate-400 mb-2">Model Detail</p>
            <h1 class="text-3xl font-semibold text-slate-900">{{ model.name }}</h1>
            <p class="text-sm text-slate-500 max-w-2xl">{{ model.note }}</p>
        </div>
        <div class="text-right">
            <p class="text-xs text-slate-400 uppercase">Version</p>
            <p class="text-2xl font-semibold text-blue-600">{{ model.version }}</p>
            <div class="mt-2">{{ badge.badge(model.status) }}</div>
        </div>
    </div>
</section>

<section class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    {{ card.card(
        subtitle='Owner · Region',
        title='<span class="text-xl">' ~ (model.owner or 'N/A') ~ '</span>',
        body='<p class="text-sm text-slate-500">Region: ' ~ model.region ~ '</p><p class="text-sm text-slate-500 mt-2">Last update: ' ~ (model.last_update or 'N/A') ~ '</p>'
    ) }}
    {{ card.card(
        subtitle='Performance',
        title='Accuracy ' ~ ('%.3f'|format(model.accuracy)),
        body='<p class="text-sm text-slate-500">Status: ' ~ model.status ~ '</p>'
    ) }}
</section>

<section class="grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6">
    <div class="ui-card space-y-3">
        <h2 class="text-lg font-semibold text-slate-900">Artifacts</h2>
        <p class="text-sm text-slate-500">Model checkpoints, metrics and logs generated using the GLOBAL merged dataset.</p>
        <ul class="list-disc list-inside text-sm text-blue-600 space-y-1">
            {% if model.artifacts.model_path %}
            <li><a href="/{{ model.artifacts.model_path }}" target="_blank">Model file</a></li>
            {% endif %}
            {% if model.artifacts.metrics_path %}
            <li><a href="/{{ model.artifacts.metrics_path }}" target="_blank">Metrics file</a></li>
            {% endif %}
            {% if model.artifacts.log_path %}
            <li><a href="/{{ model.artifacts.log_path }}" target="_blank">Training log</a></li>
            {% endif %}
        </ul>
    </div>
    <div class="ui-card space-y-3">
        <h2 class="text-lg font-semibold text-slate-900">Operational notes</h2>
        <ul class="text-sm text-slate-600 space-y-2">
            <li>Region scope: GLOBAL (EU, APAC, NA, LATAM, AFRICA, MENA).</li>
            <li>Weather integration: uses merged supplychain-weather dataset.</li>
            <li>Monitoring: auto-drift + latency watchers enabled.</li>
        </ul>
    </div>
</section>
{% endblock %}
